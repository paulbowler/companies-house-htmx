<div class="card mt-4">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs" id="companyTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="details-tab" data-bs-toggle="tab"
              data-bs-target="#details" type="button" role="tab" aria-controls="details"
              aria-selected="true">Details</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="directors-tab" data-bs-toggle="tab"
              data-bs-target="#directors" type="button" role="tab" aria-controls="directors"
              aria-selected="false">Directors</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="shareholders-tab" data-bs-toggle="tab"
              data-bs-target="#shareholders" type="button" role="tab" aria-controls="shareholders"
              aria-selected="false">Shareholders</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="filing-history-tab" data-bs-toggle="tab"
              data-bs-target="#filing-history" type="button" role="tab" aria-controls="filing-history"
              aria-selected="false">Filing History</button>
    </li>
    </ul>
  </div>
  <div class="card-body">
    <div class="tab-content" id="companyTabsContent">
      <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="details-tab">
        <h3><%= company.company_name %></h3>
        <p><strong>Company Number:</strong> <%= company.company_number %></p>
        <p><strong>Status:</strong> <span class="badge <%= company.company_status === 'active' ? 'bg-success' : 'bg-secondary' %> text-capitalize"><%= company.company_status %></span></p>
        <p><strong>Incorporated:</strong> <%= company.date_of_creation %></p>
        <p><strong>Address:</strong><br>
          <%= company.registered_office_address?.address_line_1 || '' %><br>
          <%= company.registered_office_address?.locality || '' %><br>
          <%= company.registered_office_address?.postal_code || '' %>
        </p>
      </div>
    <div class="tab-pane fade" id="directors" role="tabpanel" aria-labelledby="directors-tab">
      <% if (officers && officers.length) { %>
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Name</th>
              <th>Role</th>
              <th>Appointed On</th>
            </tr>
          </thead>
          <tbody>
            <% officers.forEach(officer => { %>
              <tr>
                <td><%= officer.name %></td>
                <td><%= officer.officer_role %></td>
                <td><%= officer.appointed_on %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } else { %>
        <p>No officer data available.</p>
      <% } %>
    </div>
    <div class="tab-pane fade" id="shareholders" role="tabpanel" aria-labelledby="shareholders-tab">
      <% if (shareholders && shareholders.length) { %>
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Name</th>
              <th>Nature of Control</th>
            </tr>
          </thead>
          <tbody>
            <% shareholders.forEach(psc => { %>
              <tr>
                <td><%= psc.name %></td>
                <td><%= (psc.nature_of_control || []).join(', ') %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } else { %>
        <p>No shareholder data available.</p>
      <% } %>
    </div>
    <div class="tab-pane fade" id="filing-history" role="tabpanel" aria-labelledby="filing-history-tab">
      <% if (filingHistory && filingHistory.length) { %>
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <% filingHistory.forEach(item => { %>
              <tr>
                <td><%= item.date %></td>
                <td><%= item.description %>
                  <% if (item.description_values) { %>
                    (<%= Object.values(item.description_values).join(', ') %>)
                  <% } %>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } else { %>
        <p>No filing history available.</p>
      <% } %>
    </div>
    </div>
  </div>
</div>
